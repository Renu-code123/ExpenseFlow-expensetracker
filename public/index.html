<!DOCTYPE html>
<html lang="en" favicon="favicon.ico">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#64ffda">
  <meta name="description" content="Take control of your finances with our intuitive expense tracker">
  <meta name="keywords" content="expense tracker, budget, finance, money management, PWA">
  <meta name="author" content="ExpenseFlow">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ExpenseFlow">
  <meta name="msapplication-TileColor" content="#0f0f23">
  <meta name="msapplication-navbutton-color" content="#64ffda">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon"
    href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iNDIiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhclswXSkiLz4KPHBhdGggZD0iTTQ4IDY0SDQ4LjA0OEgxNDRWMTI4SDk2VjE0NEgxNDRDMTUyLjgzNyAxNDQgMTYwIDEzNi44MzcgMTYwIDEyOFY2NEM1OCA1Ni4xNjMgNTIuMDQzIDQ4IDQ4IEg0OEM0MC4wNzEgNDggMzIgNTYuMDcxIDMyIDY0VjEyOEMzMiAxMzUuOTI5IDQwLjA3MSAxNDQgNDggMTQ0SDgwVjEyOEg0OFY2NFoiIGZpbGw9IiM2NGZmZGEiLz4KPHBhdGggZD0iTTY0IDgwSDgwVjk2SDY0VjgwWiIgZmlsbD0iIzY0ZmZkYSIvPgo8cGF0aCBkPSJNOTYgODBIMTI4Vjk2SDk2VjgwWiIgZmlsbD0iIzY0ZmZkYSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDBfbGluZWFyWzBdIiB4MT0iMCIgeTE9IjAiIHgyPSIxOTIiIHkyPSIxOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K">

  <title>ExpenseFlow - Smart Money Management</title>
  <link rel="stylesheet" href="expensetracker.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* =========================
   MOBILE RESPONSIVE STYLES
   ========================= */
    @media (max-width: 768px) {

      /* General */
      body {
        overflow-x: hidden;
      }

      .container {
        padding: 1rem;
      }

      /* Navbar */
      .nav-menu {
        position: absolute;
        top: 70px;
        left: 0;
        width: 100%;
        background: #0f0f23;
        flex-direction: column;
        align-items: center;
        display: none;
      }

      .nav-menu.active {
        display: flex;
      }

      .nav-link {
        padding: 1rem;
        width: 100%;
        text-align: center;
      }

      .nav-toggle {
        display: block;
        cursor: pointer;
      }

      .user-profile {
        display: none;
      }

      /* Hero */
      .hero-title {
        font-size: 1.8rem;
        text-align: center;
      }

      .hero-subtitle {
        text-align: center;
        font-size: 1rem;
      }

      /* Balance & Cards */
      .inc-exp-container {
        flex-direction: column;
        gap: 1rem;
      }

      .balance-card {
        text-align: center;
      }

      /* Filters */
      .filter-controls {
        flex-direction: column;
        gap: 0.75rem;
      }

      .advanced-filters {
        flex-direction: column;
      }

      .date-filters,
      .amount-filters {
        flex-direction: column;
        width: 100%;
      }

      /* Transaction Form */
      .form-row {
        flex-direction: column;
      }

      .form-control {
        width: 100%;
      }

      /* Footer */
      .footer-container {
        flex-direction: column;
        gap: 2rem;
        text-align: center;
      }

      .footer-stats {
        flex-direction: column;
        gap: 0.5rem;
      }
    }

    #redirect {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-left: 12px;
      border: 1px solid #64ffda;
      background-color: #0f0f23;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }

    #redirect a {
      color: #64ffda;
      text-decoration: none;
      font-weight: 500;
      margin-right: 8px;
    }

    .i18n-multiline {
      white-space: pre-line;
    }

    .footer-links {
      display: grid;
      grid-template-columns: repeat(3, minmax(100px, 1fr));
    }

    .footer-links {
      display: grid;
      grid-template-columns: repeat(3, minmax(100px, 1fr));
    }

    /* Auto-Categorize Button Styles */
    .auto-categorize-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1.2rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    .auto-categorize-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .auto-categorize-btn:active {
      transform: translateY(0);
    }

    .auto-categorize-btn.loading {
      opacity: 0.7;
      pointer-events: none;
    }

    .auto-categorize-btn.loading i {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* Suggested Badge Styles */
    .suggested-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.2rem 0.5rem;
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.2));
      color: #ffc107;
      border: 1px solid rgba(255, 193, 7, 0.3);
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .auto-apply-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.2rem 0.5rem;
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(56, 142, 60, 0.2));
      color: #4caf50;
      border: 1px solid rgba(76, 175, 80, 0.3);
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Suggestion Item Enhancements */
    .suggestion-item.high-confidence {
      border-left: 3px solid #4caf50;
    }

    .suggestions-threshold-info {
      padding: 0.5rem 1rem;
      color: var(--text-secondary, #888);
      font-size: 0.8rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .suggestions-threshold-info i {
      margin-right: 0.3rem;
      color: #64ffda;
    }

    /* Auto-Categorize Results Modal Styles */
    .categorize-results-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .categorize-results-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .categorize-results-content {
      background: var(--card-bg, #1a1a2e);
      border-radius: 16px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      border: 1px solid rgba(100, 255, 218, 0.2);
    }

    .categorize-results-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }

    .categorize-results-header h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #64ffda;
      margin: 0;
    }

    .categorize-results-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .stat-card {
      text-align: center;
      padding: 1rem;
      background: rgba(100, 255, 218, 0.05);
      border-radius: 8px;
    }

    .stat-card .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #64ffda;
    }

    .stat-card .stat-label {
      font-size: 0.75rem;
      color: var(--text-secondary, #888);
      text-transform: uppercase;
    }

    /* Smart Triggers Styles */
    .automation-section {
      background: rgba(255, 255, 255, 0.03);
      padding: 2rem;
      border-radius: 16px;
      margin-top: 2rem;
      border: 1px solid rgba(100, 255, 218, 0.1);
    }

    .automation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .rule-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .rule-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 1.5rem;
      border-radius: 12px;
      border-left: 4px solid #64ffda;
      transition: transform 0.3s ease;
      display: flex;
      justify-content: space-between;
    }

    .rule-item.inactive {
      border-left-color: #888;
      opacity: 0.7;
    }

    .rule-summary {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 1rem 0;
      font-size: 0.9rem;
      color: #64ffda;
    }

    .rule-stats {
      font-size: 0.8rem;
      color: #888;
      display: flex;
      gap: 1rem;
    }

    .btn-toggle,
    .btn-delete {
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      font-size: 1.1rem;
      transition: color 0.3s;
    }

    .btn-toggle:hover {
      color: #64ffda;
    }

    .btn-delete:hover {
      color: #ff5252;
    }

    < !-- Header --><header class="header"><nav class="navbar"><div class="nav-container"><div class="nav-logo"><i class="fas fa-wallet"></i><span>ExpenseFlow</span></div><div class="nav-menu" id="nav-menu"><a href="#dashboard" class="nav-link active">Dashboard</a><a href="analytics.html" class="nav-link">Analytics</a><a href="goals.html" class="nav-link">Goals</a><a href="settings.html" class="nav-link">Settings</a><a href="#analytics" class="nav-link">Analytics</a><a href="#health" class="nav-link" id="health-tab">Health</a><a href="#goals" class="nav-link">Goals</a><a href="#automations" class="nav-link">Automations</a><a href="security-dashboard.html" class="nav-link"><i class="fas fa-shield-alt"></i> Security</a><a href="faq.html" class="nav-link">FAQ</a><a href="#settings" class="nav-link">Settings</a><a href="Monthlysummary.html" class="nav-link">Monthly/Yearly Summary</a><a href="cookiepolicy.html" class="nav-link">Cookie Policy</a><a href="./contributor.html" class="nav-link">Contributors</a></div><div class="nav-toggle" id="nav-toggle"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div><div class="user-profile"><div class="sync-status" style="margin: 0 12px; cursor: pointer; color: #64ffda;" onclick="ExpenseSync.syncWithServer()"><i id="sync-status-icon" class="fas fa-cloud-check sync-success" title="All changes synced"></i></div><div id="workspace-selector" class="workspace-selector"></div><select id="language-switcher" class="language-select" aria-label="Language"><option value="en">EN</option><option value="es">ES</option><option value="fr">FR</option></select><button class="currency-btn" onclick="openCurrencyModal()" title="Currency Settings"><i class="fas fa-coins"></i><span id="current-currency">INR</span></button><a href="profile.html"><img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face" alt="User"
    class="profile-img"><span class="username" id="navUsername"></span></a><div id="redirect"><a href="#" id="logoutLink" onclick="logout()">Logout</a></div></div></div></nav></header>< !-- Main Content --><main class="main-content">< !-- Full Hero Section --><div class="hero-section-full"><div class="hero-background-animation"><div class="floating-shape shape-1"></div><div class="floating-shape shape-2"></div><div class="floating-shape shape-3"></div></div><div class="hero-content-wrapper"><div class="hero-badge"><i class="fas fa-star"></i><span data-i18n="hero.badge">Trusted by 10,
    000+users worldwide</span></div><h1 class="hero-title i18n-multiline" data-i18n="hero.title">Smart Money Management Made Simple</h1><p class="hero-subtitle i18n-multiline" data-i18n="hero.subtitle">Take control of your finances with our intelligent expense tracker. Track,
    analyze,
    and optimize your spending habits effortlessly.</p><div class="hero-cta"><button class="cta-primary" onclick="document.getElementById('form').scrollIntoView({ behavior: 'smooth' })"><i class="fas fa-rocket"></i><span data-i18n="hero.cta.start">Start Tracking Now</span></button><button class="cta-secondary"
    onclick="document.getElementById('features-section').scrollIntoView({ behavior: 'smooth' })"><i class="fas fa-info-circle"></i><span data-i18n="hero.cta.learn">Learn More</span></button></div><div class="hero-features"><div class="feature-pill"><i class="fas fa-robot"></i><span>AI-Powered</span></div><div class="feature-pill"><i class="fas fa-lock"></i><span>Secure & Private</span></div><div class="feature-pill"><i class="fas fa-mobile-alt"></i><span>Works Offline</span></div><div class="feature-pill"><i class="fas fa-globe"></i><span>Multi-Currency</span></div></div><div class="scroll-indicator"><i class="fas fa-chevron-down"></i><span>Scroll to explore</span></div></div></div>< !-- Features Section --><section id="features-section" class="features-showcase"><div class="container"><div class="section-header-center"><h2 class="section-title" data-i18n="feature.heading">Powerful Features for Smart Finance</h2><p class="section-subtitle" data-i18n="feature.subheading">Everything you need to manage your money effectively</p></div><div class="features-grid"><div class="feature-card"><div class="feature-icon"><i class="fas fa-brain"></i></div><h3>AI Categorization</h3><p>Automatically categorize your expenses with intelligent machine learning algorithms</p></div><div class="feature-card"><div class="feature-icon"><i class="fas fa-chart-pie"></i></div><h3>Visual Analytics</h3><p>Beautiful charts and insights to understand your spending patterns at a glance</p></div><div class="feature-card"><div class="feature-icon"><i class="fas fa-sync-alt"></i></div><h3>Recurring Expenses</h3><p>Track subscriptions and recurring bills automatically with smart reminders</p></div><div class="feature-card"><div class="feature-icon"><i class="fas fa-file-export"></i></div><h3>Export & Reports</h3><p>Generate detailed reports in CSV or PDF format for tax season</p></div><div class="feature-card"><div class="feature-icon"><i class="fas fa-bullseye"></i></div><h3>Budget Goals</h3><p>Set financial goals and track your progress with intuitive dashboards</p></div><div class="feature-card"><div class="feature-icon"><i class="fas fa-shield-alt"></i></div><h3>Secure & Private</h3><p>Bank-level encryption keeps your financial data safe and private</p></div></div></div><div class="nav-menu" id="nav-menu"><a href="#dashboard" class="nav-link active">Dashboard</a><a href="#analytics" class="nav-link">Analytics</a><a href="#goals" class="nav-link">Goals</a><a href="faq.html" class="nav-link">FAQ</a><a href="#settings" class="nav-link">Settings</a><a href="Monthlysummary.html" class="nav-link">Summary</a><a href="contributor.html" class="nav-link">Contributors</a></div><div class="nav-toggle" id="nav-toggle"><span></span><span></span><span></span></div></div></nav></header>< !-- Balance Card --><div class="balance-card"><div class="balance-header"><i class="fas fa-chart-line"></i><h4>Your Balance</h4></div><h1 id="balance" class="balance-amount">&#8377;
    0.00</h1><div class="balance-trend"><span class="trend-indicator positive">‚Üó</span><span class="trend-text">+2.5% from last month</span></div></div>< !-- Income & Expense Cards --><div class="inc-exp-container"><div class="income-card"><div class="card-icon income-icon"><i class="fas fa-arrow-up"></i></div><div class="card-content"><h4>Income</h4><p id="money-plus" class="money-plus">+&#8377;
    0.00 </p></div></div><div class="expense-card"><div class="card-icon expense-icon"><i class="fas fa-arrow-down"></i></div><div class="card-content"><h4>Expense</h4><p id="money-minus" class="money-minus">-&#8377;
    0.00 </p></div></div></div>< !-- Transaction History --><div class="history-section"><div class="section-header"><h3><i class="fas fa-history"></i><span data-i18n="history.title">Transaction History</span></h3><button id="auto-categorize-btn" class="auto-categorize-btn" title="Auto-categorize uncategorized transactions"><i class="fas fa-magic"></i><span>Auto-Categorize</span></button></div><div class="filter-controls"><div class="search-container"><input type="text" id="search-input" placeholder="Search transactions..." class="search-input"
    data-i18n-placeholder="history.search"><i class="fas fa-search search-icon"></i></div><div class="filter-buttons"><button class="filter-btn active" data-filter="all" data-i18n="history.filter.all">All</button><button class="filter-btn" data-filter="income" data-i18n="history.filter.income">Income</button><button class="filter-btn" data-filter="expense" data-i18n="history.filter.expense">Expense</button></div><div class="advanced-filters"><select id="category-filter" class="category-select"><option value="all" data-i18n="history.category.all">All Categories</option><option value="food">üçΩÔ∏è Food & Dining</option><option value="transport">üöó Transportation</option><option value="shopping">üõí Shopping</option><option value="entertainment">üé¨ Entertainment</option><option value="bills">üí° Bills & Utilities</option><option value="healthcare">üè• Healthcare</option><option value="education">üìö Education</option><option value="travel">‚úàÔ∏è Travel</option><option value="salary">üíº Salary</option><option value="freelance">üíª Freelance</option><option value="investment">üìà Investment</option><option value="other">üìã Other</option></select><div class="date-filters"><input type="date" id="date-from" class="date-input" placeholder="From"><input type="date" id="date-to" class="date-input" placeholder="To"></div><div class="amount-filters"><input type="number" id="amount-min" placeholder="Min Amount" class="amount-input" step="0.01"><input type="number" id="amount-max" placeholder="Max Amount" class="amount-input" step="0.01"></div><button class="clear-filters-btn" id="clear-filters"><i class="fas fa-times"></i><span data-i18n="history.clear">Clear Filters</span></button></div></div></div><ul id="list" class="list">< !-- Transactions will be added here --></ul></div>< !-- Data Management Section --><div class="data-management-section"><h3><i class="fas fa-database"></i><span data-i18n="data.title">Data Management</span></h3><div class="data-actions"><div class="export-section"><h4 data-i18n="data.export">Export Data</h4><div class="export-buttons"><button class="export-btn" id="export-csv"><i class="fas fa-file-csv"></i><span data-i18n="data.export.csv">Quick CSV</span></button><button class="export-btn pdf-btn" id="export-pdf"><i class="fas fa-file-pdf"></i><span data-i18n="data.export.pdf">Quick PDF</span></button><button class="export-btn advanced-btn" id="open-export-modal"><i class="fas fa-cog"></i><span data-i18n="data.export.advanced">Advanced Export</span></button><button class="export-btn report-btn" id="open-report-generator" onclick="openReportGenerator()"><i class="fas fa-chart-line"></i><span>Professional Report</span></button></div></div><div class="import-section"><h4 data-i18n="data.import">Import Data</h4><div class="import-controls"><input type="file" id="import-file" accept=".csv,.json" class="file-input"><label for="import-file" class="file-label"><i class="fas fa-upload"></i><span data-i18n="data.import.choose">Choose File</span></label><button class="import-btn" id="import-data" disabled><i class="fas fa-download"></i><span data-i18n="data.import.run">Import Data</span></button></div><div class="import-options"><label class="checkbox-label"><input type="checkbox" id="merge-data" checked><span class="checkmark"></span><span data-i18n="data.import.merge">Merge with existing data</span></label></div></div></div></div></div></nav></header>
    <!-- Smart Automations Section -->
    <section id="automations" class="automation-section">
      <div class="automation-header">
        <h3><i class="fas fa-robot"></i> Smart Automations</h3>
        <button class="btn-submit" onclick="openRuleModal()">
          <i class="fas fa-plus"></i> Create Rule
        </button>
      </div>
      <p class="section-desc">Create "If-Then" rules to automate your transaction workflow.</p>
      <div id="rule-list" class="rule-list">
        <!-- Rules will be loaded here -->
      </div>
    </section>

    <!-- Create Rule Modal -->
    <div id="rule-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3><i class="fas fa-bolt"></i> Create Automation Rule</h3>
          <span class="close-modal" onclick="closeRuleModal()">&times;</span>
        </div>
        <form id="rule-form">
          <div class="modal-body">
            <div class="form-control">
              <label for="rule-name">Rule Name *</label>
              <input type="text" id="rule-name" placeholder="e.g., Amazon Work Tagging" required>
            </div>
            <div class="form-control">
              <label for="rule-description">Description</label>
              <textarea id="rule-description" rows="2" placeholder="What does this rule do?"></textarea>
            </div>
            <div class="rule-builder">
              <div class="trigger-group">
                <h5>IF Transaction:</h5>
                <div class="builder-row">
                  <select id="trigger-field" required>
                    <option value="description">Description</option>
                    <option value="amount">Amount</option>
                    <option value="category">Category</option>
                    <option value="merchant">Merchant</option>
                  </select>
                  <select id="trigger-operator" required>
                    <option value="contains">Contains</option>
                    <option value="equals">Equals</option>
                    <option value="greater_than">Is Greater Than</option>
                    <option value="less_than">Is Less Than</option>
                    <option value="starts_with">Starts With</option>
                  </select>
                  <input type="text" id="trigger-value" placeholder="Value" required>
                </div>
              </div>
              <div class="action-group" style="margin-top: 1.5rem;">
                <h5>THEN Action:</h5>
                <div class="builder-row">
                  <select id="action-type" required>
                    <option value="auto_categorize">Auto-Categorize As</option>
                    <option value="add_tag">Add Tag</option>
                    <option value="flag_for_review">Flag for Review</option>
                    <option value="move_to_workspace">Move to Workspace</option>
                  </select>
                  <input type="text" id="action-value" placeholder="Value (Category, Tag, etc.)" required>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-cancel" onclick="closeRuleModal()">Cancel</button>
            <button type="submit" class="btn-submit">Save Rule</button>
          </div>
        </form>
      </div>
    </div>

< !-- Export Modal --><div class="export-modal" id="export-modal"><div class="export-modal-content"><div class="export-modal-header"><h3><i class="fas fa-download"></i><span data-i18n="export.modal.title">Export Expenses</span></h3><button class="modal-close-btn" id="export-modal-close"><i class="fas fa-times"></i></button></div><div class="export-modal-body">< !-- Format Selection --><div class="export-format-section"><h4 data-i18n="export.format.title">Export Format</h4><div class="format-options"><label class="format-option"><input type="radio" name="export-format" id="export-format" value="csv" checked><div class="format-card"><i class="fas fa-file-csv"></i><span class="format-name" data-i18n="export.format.csv">CSV</span><span class="format-desc" data-i18n="export.format.csv.desc">Excel compatible</span></div></label><label class="format-option"><input type="radio" name="export-format" value="pdf"><div class="format-card"><i class="fas fa-file-pdf"></i><span class="format-name" data-i18n="export.format.pdf">PDF Report</span><span class="format-desc" data-i18n="export.format.pdf.desc">With charts & summary</span></div></label></div></div>< !-- Filters --><div class="export-filters-section"><h4 data-i18n="export.filters.title">Filter Options</h4><div class="filter-grid"><div class="form-control"><label for="export-start-date">Start Date</label><input type="date" id="export-start-date"></div><div class="form-control"><label for="export-end-date">End Date</label><input type="date" id="export-end-date"></div><div class="form-control"><label for="export-category-filter">Category</label><select id="export-category-filter"><option value="all">All Categories</option><option value="food">üçΩÔ∏è Food & Dining</option><option value="transport">üöó Transportation</option><option value="shopping">üõí Shopping</option><option value="entertainment">üé¨ Entertainment</option><option value="utilities">üí° Bills & Utilities</option><option value="healthcare">üè• Healthcare</option><option value="other">üìã Other</option></select></div><div class="form-control"><label for="export-type-filter">Type</label><select id="export-type-filter"><option value="all">All Types</option><option value="income">üí∞ Income Only</option><option value="expense">üí∏ Expenses Only</option></select></div></div></div>< !-- Preview --><div class="export-preview-section"><h4 data-i18n="export.preview.title">Export Preview</h4><div class="export-preview" id="export-preview"><div class="export-preview-loading">Loading preview...</div></div></div></div><div class="export-modal-footer"><button type="button" class="btn-cancel" id="export-cancel-btn"
    data-i18n="export.actions.cancel">Cancel</button><button type="button" class="btn-submit" id="export-submit-btn"><i class="fas fa-download"></i><span data-i18n="export.actions.export">Export</span></button></div></div></div>< !-- Add Transaction Form --><div class="form-section"><h3><i class="fas fa-plus-circle"></i><span data-i18n="form.title">Add New Transaction</span></h3><form id="form" class="transaction-form"><div class="form-row"><div class="ocr-scan-container" style="width: 100%; margin-bottom: 1.5rem;"><div class="ocr-scan-wrapper"
    style="border: 2px dashed rgba(100, 255, 218, 0.3); border-radius: 12px; padding: 1.5rem; text-align: center; background: rgba(100, 255, 218, 0.05); transition: all 0.3s ease;"><i class="fas fa-camera"
    style="font-size: 2rem; color: var(--accent-primary); margin-bottom: 0.5rem;"></i><h4>Don't want to type?</h4>
 <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">Upload a receipt and let AI fill the fields for you.</p><label for="receipt-scan-input" class="cta-secondary"
    style="display: inline-flex; align-items: center; gap: 0.5rem; cursor: pointer; padding: 0.6rem 1.2rem; font-size: 0.9rem;"><i class="fas fa-file-upload"></i>Scan Receipt </label><input type="file" id="receipt-scan-input" accept="image/*,application/pdf" style="display: none;"></div></div></div><div class="form-row"><div class="form-control"><label for="text" data-i18n="form.description">Description</label><input type="text" id="text" placeholder="Enter transaction description" required data-i18n-placeholder="form.description.placeholder" /></div><div class="form-control"><label for="category">Category <span id="category-confidence"

    class="confidence-badge hidden"></span></label><select id="category" required><option value="">Select Category</option><option value="food">üçΩÔ∏è Food & Dining</option><option value="transport">üöó Transportation</option><option value="shopping">üõí Shopping</option><option value="entertainment">üé¨ Entertainment</option><option value="bills">üí° Bills & Utilities</option><option value="healthcare">üè• Healthcare</option><option value="education">üìö Education</option><option value="travel">‚úàÔ∏è Travel</option><option value="salary">üíº Salary</option><option value="freelance">üíª Freelance</option><option value="investment">üìà Investment</option><option value="other">üìã Other</option></select></div></div><div class="form-row"><div class="form-control"><label for="amount" data-i18n="form.amount">Amount</label><input type="number" id="amount" placeholder="Enter amount" step="0.01" min="0.01" required data-i18n-placeholder="form.amount.placeholder"><small>Enter positive amounts only. Select expense or income type.</small></div><div class="form-control"><label for="currency" data-i18n="form.currency">Currency</label><select id="currency" required><option value="">Loading currencies...</option></select></div></div><div class="form-row"><div class="form-control"><label for="type" data-i18n="form.type">Transaction Type</label><select id="type" required><option value="">Select Type</option><option value="income" data-i18n="form.type.income">üí∞ Income</option><option value="expense" data-i18n="form.type.expense">üí∏ Expense</option></select></div><div class="form-control"></div></div><button type="submit" class="btn-submit"><i class="fas fa-plus"></i><span data-i18n="form.submit">Add Transaction</span></button></form></div>< !-- Recurring Expenses Section --><div class="recurring-section" id="recurring-section"><div class="section-header"><h3><i class="fas fa-sync-alt"></i><span data-i18n="recurring.title">Recurring Expenses & Subscriptions</span></h3><button class="add-recurring-btn" id="add-recurring-btn"><i class="fas fa-plus"></i><span data-i18n="recurring.add">Add Recurring</span></button></div>< !-- Recurring Statistics --><div class="recurring-stats" id="recurring-stats">< !-- Stats will be rendered here --></div>< !-- Recurring Expenses List --><div class="recurring-list" id="recurring-list">< !-- Recurring expenses will be rendered here --></div></div>< !-- Recurring Expense Modal --><div class="recurring-modal" id="recurring-modal"><div class="recurring-modal-content"><div class="recurring-modal-header"><h3 id="recurring-modal-title">Add Recurring Expense</h3><button class="modal-close-btn" id="recurring-modal-close"><i class="fas fa-times"></i></button></div><form id="recurring-form" class="recurring-form"><input type="hidden" id="recurring-id"><div class="form-row"><div class="form-control"><label for="recurring-description">Description *</label><input type="text" id="recurring-description" placeholder="e.g., Netflix Subscription" required></div><div class="form-control"><label for="recurring-amount">Amount (‚Çπ) *</label><input type="number" id="recurring-amount" placeholder="499.00" step="0.01" min="0.01" required></div></div><div class="form-row"><div class="form-control"><label for="recurring-category">Category *</label><select id="recurring-category" required><option value="">Select Category</option><option value="subscription">üì∫ Subscription</option><option value="rent">üè† Rent</option><option value="insurance">üõ°Ô∏è Insurance</option><option value="utilities">üí° Utilities</option><option value="entertainment">üé¨ Entertainment</option><option value="food">üçΩÔ∏è Food</option><option value="transport">üöó Transport</option><option value="healthcare">üè• Healthcare</option><option value="shopping">üõí Shopping</option><option value="other">üìã Other</option></select></div><div class="form-control"><label for="recurring-type">Type *</label><select id="recurring-type" required><option value="expense">üí∏ Expense</option><option value="income">üí∞ Income</option></select></div></div><div class="form-row"><div class="form-control"><label for="recurring-frequency">Frequency *</label><select id="recurring-frequency" required><option value="monthly">Monthly</option><option value="weekly">Weekly</option><option value="biweekly">Bi-weekly</option><option value="daily">Daily</option><option value="quarterly">Quarterly</option><option value="yearly">Yearly</option></select></div><div class="form-control"><label for="recurring-reminder-days">Remind Before (days)</label><input type="number" id="recurring-reminder-days" value="3" min="0" max="30"></div></div><div class="form-row"><div class="form-control"><label for="recurring-start-date">Start Date *</label><input type="date" id="recurring-start-date" required></div><div class="form-control"><label for="recurring-next-due">Next Due Date *</label><input type="date" id="recurring-next-due" required></div></div><div class="form-row"><div class="form-control"><label for="recurring-end-date">End Date (optional)</label><input type="date" id="recurring-end-date"></div><div class="form-control checkbox-control"><label class="checkbox-label"><input type="checkbox" id="recurring-auto-create" checked><span class="checkmark"></span>Auto-create expense on due date </label></div></div><div class="form-control full-width"><label for="recurring-notes">Notes (optional)</label><textarea id="recurring-notes" rows="3" placeholder="Add any notes..."></textarea></div><div class="modal-actions"><button type="button" class="btn-cancel" id="recurring-cancel-btn">Cancel</button><button type="submit" class="btn-submit"><i class="fas fa-save"></i>Save </button></div></form></div></section>< !-- Goals Section --><section id="goals" class="goals-section" style="display: none;"><div class="section-header"><h3><i class="fas fa-bullseye"></i>Financial Goals</h3></div><div id="goals-content" class="goals-content">< !-- Goals content will be loaded here --><div class="goals-placeholder"><i class="fas fa-bullseye" style="font-size: 3rem; color: var(--accent-primary); margin-bottom: 1rem;"></i><h4>Set Your Financial Goals</h4><p>Create and track your savings goals,
    budget targets,
    and financial milestones.</p><button class="btn btn-primary" onclick="initializeGoals()">Get Started</button></div></div></section>< !-- Analytics Dashboard Section --><section id="analytics" class="analytics-section" style="display: none;"><div class="section-header"><h3><i class="fas fa-chart-bar"></i>Financial Analytics & Forecasting</h3><div class="analytics-actions"><select id="trends-period" class="period-select"><option value="monthly">Monthly</option><option value="weekly">Weekly</option><option value="daily">Daily</option></select><button id="refresh-analytics" class="refresh-btn"><i class="fas fa-sync-alt"></i>Refresh </button></div></div><div id="analytics-dashboard" class="analytics-grid">< !-- Top Row: Velocity and Forecast --><div class="analytics-row top-row"><div id="velocity-widget" class="analytics-card velocity-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Calculating velocity...</span></div></div><div id="forecast-widget" class="analytics-card forecast-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Generating forecast...</span></div></div></div>< !-- Issue #444: Financial Runway & Subscription Detection Row --><div class="analytics-row runway-row"><div id="runway-widget" class="analytics-card runway-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Calculating runway...</span></div></div><div id="burn-rate-widget" class="analytics-card burn-rate-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Calculating burn rate...</span></div></div></div>< !-- Issue #444: Upcoming Charges & Detected Subscriptions Row --><div class="analytics-row subscriptions-row"><div id="upcoming-charges-widget" class="analytics-card upcoming-charges-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading upcoming charges...</span></div></div><div id="detected-subscriptions" class="analytics-card detected-subs-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Scanning for subscriptions...</span></div></div></div>< !-- Middle Row: Trends and Category Breakdown --><div class="analytics-row main-charts"><div id="trends-chart" class="analytics-card trends-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading trends...</span></div></div><div id="category-chart" class="analytics-card category-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading distribution...</span></div></div></div>< !-- Bottom Row: Insights and Predictions --><div class="analytics-row details-row"><div id="insights-container" class="analytics-card insights-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Gathering insights...</span></div></div><div id="predictions-widget" class="analytics-card predictions-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Predicting spending...</span></div></div></div></div></section></div>< !-- Health & Achievements Section (Issue #421) --><section id="health" class="health-section" style="display: none;"><div class="section-header"><h3><i class="fas fa-heartbeat"></i>Financial Health & Achievements</h3><div class="health-actions"><button id="refresh-health-btn" class="refresh-btn"><i class="fas fa-sync-alt"></i>Refresh </button><button id="share-health-btn" class="share-btn"><i class="fas fa-share-alt"></i>Share </button></div></div><div id="health-achievements-section" class="health-container">< !-- Gamification Profile: Level,
    XP,
    Streak --><div id="gamification-profile" class="gamification-profile-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading profile...</span></div></div>< !-- Main Health Score Dashboard --><div id="health-score-dashboard" class="health-score-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Calculating health score...</span></div></div>< !-- Badges Grid --><div id="badges-grid" class="badges-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading badges...</span></div></div>< !-- Leaderboard --><div id="leaderboard" class="leaderboard-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading leaderboard...</span></div></div>< !-- Financial Profile Form --><div id="financial-profile-form" class="financial-profile-card"><div class="widget-loading"><i class="fas fa-spinner fa-spin"></i><span>Loading form...</span></div></div></div>< !-- Health Section Styles --><style>.health-section {
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .health-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      padding: 1rem 0;
    }

    .health-container.loading {
      opacity: 0.6;
      pointer-events: none;
    }

    /* Health Score Card */
    .health-score-card {
      background: linear-gradient(135deg, rgba(15, 15, 35, 0.95), rgba(30, 30, 60, 0.9));
      border-radius: 16px;
      padding: 2rem;
      grid-column: span 2;
      border: 1px solid rgba(100, 255, 218, 0.2);
    }

    .health-score-main {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .score-circle-container {
      flex: 0 0 200px;
      text-align: center;
    }

    .score-circle {
      position: relative;
      width: 160px;
      height: 160px;
      margin: 0 auto;
    }

    .score-ring {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
    }

    .score-ring-bg {
      fill: none;
      stroke: rgba(255, 255, 255, 0.1);
      stroke-width: 8;
    }

    .score-ring-progress {
      fill: none;
      stroke-width: 8;
      stroke-linecap: round;
      transition: stroke-dasharray 1s ease;
    }

    .score-value {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .score-number {
      font-size: 3rem;
      font-weight: 700;
      color: var(--accent-primary, #64ffda);
      display: block;
    }

    .score-grade {
      font-size: 1.5rem;
      font-weight: 600;
      color: #fff;
    }

    .score-title {
      margin-top: 1rem;
      color: #fff;
      font-size: 1.2rem;
    }

    .score-subtitle {
      color: #b4b4b4;
      font-size: 0.9rem;
    }

    /* Score Components */
    .score-components {
      flex: 1;
      min-width: 250px;
    }

    .score-components h4 {
      color: #fff;
      margin-bottom: 1rem;
    }

    .component-item {
      margin-bottom: 1rem;
      background: rgba(255, 255, 255, 0.05);
      padding: 0.75rem;
      border-radius: 8px;
    }

    .component-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .component-icon {
      font-size: 1.2rem;
    }

    .component-name {
      flex: 1;
      color: #fff;
      font-size: 0.9rem;
    }

    .component-weight {
      color: #b4b4b4;
      font-size: 0.8rem;
    }

    .component-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
    }

    .component-progress {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .component-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 0.3rem;
      font-size: 0.8rem;
    }

    .component-score {
      color: #64ffda;
    }

    .component-status {
      color: #b4b4b4;
      text-transform: capitalize;
    }

    /* Community Comparison */
    .community-comparison {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .community-comparison h4 {
      color: #fff;
      margin-bottom: 1rem;
    }

    .comparison-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .comparison-card {
      background: rgba(100, 255, 218, 0.1);
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border-left: 3px solid #64ffda;
    }

    .comparison-card.negative {
      background: rgba(255, 87, 34, 0.1);
      border-left-color: #ff5722;
    }

    .comparison-component {
      display: block;
      font-size: 0.8rem;
      color: #b4b4b4;
    }

    .comparison-message {
      color: #fff;
      font-size: 0.9rem;
    }

    /* Health Insights */
    .health-insights {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .health-insights h4,
    .health-insights h5 {
      color: #fff;
      margin-bottom: 0.75rem;
    }

    .insights-section {
      margin-bottom: 1.5rem;
    }

    .insight-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.75rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .insight-item.strength {
      border-left: 3px solid #00e676;
    }

    .insight-item.improvement {
      border-left: 3px solid #ffc107;
    }

    .insight-item.improvement.priority-high {
      border-left-color: #ff5722;
    }

    .insight-icon {
      font-size: 1.2rem;
    }

    .insight-content {
      flex: 1;
    }

    .insight-text {
      color: #fff;
      font-size: 0.9rem;
    }

    .priority-badge {
      display: inline-block;
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      margin-left: 0.5rem;
      text-transform: uppercase;
    }

    .priority-badge.high {
      background: rgba(255, 87, 34, 0.2);
      color: #ff5722;
    }

    .priority-badge.medium {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
    }

    .priority-badge.low {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
    }

    /* Health History Chart */
    .health-history {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .health-history h4 {
      color: #fff;
      margin-bottom: 1rem;
    }

    #health-history-chart {
      height: 200px !important;
    }

    /* Gamification Profile Card */
    .gamification-profile-card {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(102, 126, 234, 0.3);
    }

    .profile-header {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .level-display {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .level-badge {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .level-number {
      color: #fff;
      font-weight: 700;
      font-size: 1rem;
    }

    .level-info {
      flex: 1;
    }

    .level-name {
      color: #fff;
      font-size: 1.1rem;
      margin: 0 0 0.5rem 0;
    }

    .xp-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      width: 150px;
    }

    .xp-progress {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .xp-text {
      font-size: 0.8rem;
      color: #b4b4b4;
    }

    .profile-stats {
      display: flex;
      gap: 1.5rem;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      display: block;
      font-size: 1.5rem;
      font-weight: 700;
      color: #64ffda;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #b4b4b4;
    }

    /* Badges Card */
    .badges-card {
      background: linear-gradient(135deg, rgba(15, 15, 35, 0.95), rgba(30, 30, 60, 0.9));
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 215, 0, 0.2);
    }

    .badges-section h4 {
      color: #fff;
      margin-bottom: 1rem;
    }

    .badges-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .badge-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 0.75rem;
      border-radius: 8px;
      text-align: center;
      min-width: 80px;
      border: 2px solid transparent;
      transition: transform 0.2s;
    }

    .badge-card.earned:hover {
      transform: scale(1.05);
    }

    .badge-card.locked {
      opacity: 0.5;
    }

    .badge-icon {
      font-size: 1.5rem;
      display: block;
      margin-bottom: 0.25rem;
    }

    .locked-icon {
      filter: grayscale(100%);
    }

    .badge-name {
      font-size: 0.75rem;
      color: #fff;
      display: block;
    }

    .badge-tier {
      font-size: 0.65rem;
      text-transform: capitalize;
    }

    .badge-date {
      font-size: 0.65rem;
      color: #b4b4b4;
      display: block;
    }

    .no-badges {
      color: #b4b4b4;
      font-style: italic;
    }

    /* Leaderboard Card */
    .leaderboard-card {
      background: linear-gradient(135deg, rgba(15, 15, 35, 0.95), rgba(30, 30, 60, 0.9));
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(100, 255, 218, 0.2);
    }

    .leaderboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .leaderboard-header h4 {
      color: #fff;
      margin: 0;
    }

    .leaderboard-tabs {
      display: flex;
      gap: 0.5rem;
    }

    .lb-tab {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      color: #b4b4b4;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.2s;
    }

    .lb-tab.active {
      background: #64ffda;
      color: #0f0f23;
    }

    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .lb-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }

    .lb-item.top-1 {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .lb-item.top-2 {
      background: linear-gradient(135deg, rgba(192, 192, 192, 0.2), rgba(192, 192, 192, 0.1));
      border: 1px solid rgba(192, 192, 192, 0.3);
    }

    .lb-item.top-3 {
      background: linear-gradient(135deg, rgba(205, 127, 50, 0.2), rgba(205, 127, 50, 0.1));
      border: 1px solid rgba(205, 127, 50, 0.3);
    }

    .lb-rank {
      font-size: 1.2rem;
      min-width: 30px;
    }

    .lb-name {
      flex: 1;
      color: #fff;
    }

    .lb-score {
      font-weight: 700;
      color: #64ffda;
    }

    .lb-grade {
      background: rgba(100, 255, 218, 0.2);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      color: #64ffda;
    }

    /* Financial Profile Form */
    .financial-profile-card {
      background: linear-gradient(135deg, rgba(15, 15, 35, 0.95), rgba(30, 30, 60, 0.9));
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(100, 255, 218, 0.2);
      grid-column: span 2;
    }

    .financial-profile-card h4 {
      color: #fff;
      margin-bottom: 0.5rem;
    }

    .form-subtitle {
      color: #b4b4b4;
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
    }

    .profile-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .form-row {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .form-group {
      flex: 1;
      min-width: 200px;
    }

    .form-group label {
      display: block;
      color: #b4b4b4;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .form-group input {
      width: 100%;
      padding: 0.75rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: #fff;
      font-size: 1rem;
    }

    .form-group input:focus {
      outline: none;
      border-color: #64ffda;
    }

    .btn-update-profile {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      align-self: flex-start;
      transition: transform 0.2s;
    }

    .btn-update-profile:hover {
      transform: scale(1.02);
    }

    /* Share Button */
    .share-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Widget Loading State */
    .widget-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      color: #b4b4b4;
      gap: 0.5rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .health-score-card {
        grid-column: span 1;
      }

      .financial-profile-card {
        grid-column: span 1;
      }

      .health-score-main {
        flex-direction: column;
        align-items: center;
      }

      .profile-header {
        flex-direction: column;
        text-align: center;
      }

      .profile-stats {
        justify-content: center;
      }
    }
  </style>
  </section>

  <!-- Settings Section -->
  <section id="settings" class="settings-section" style="display: none;">
    <div class="section-header">
      <h3><i class="fas fa-cog"></i> Settings</h3>
    </div>

    <div class="settings-container">
      <!-- Workspace Settings Tab -->
      <div class="settings-tabs">
        <button class="settings-tab active" onclick="switchSettingsTab('workspace')">Workspace</button>
        <button class="settings-tab" onclick="switchSettingsTab('approvals')">Approvals</button>
        <button class="settings-tab" onclick="switchSettingsTab('profile')">Profile</button>
      </div>

      <!-- Workspace Settings -->
      <div id="workspace-settings" class="settings-content active">
        <div class="settings-card">
          <h4><i class="fas fa-users"></i> Workspace Management</h4>
          <div class="workspace-info">
            <div class="current-workspace">
              <label>Current Workspace:</label>
              <span id="current-workspace-name">Personal</span>
            </div>
            <div class="workspace-selector">
              <label for="workspace-select">Switch Workspace:</label>
              <select id="workspace-select" onchange="switchWorkspace()">
                <option value="personal">Personal</option>
              </select>
            </div>
          </div>

          <div class="workspace-actions">
            <button class="btn-secondary" onclick="openCreateWorkspaceModal()">
              <i class="fas fa-plus"></i> Create New Workspace
            </button>
          </div>
        </div>

        <div class="settings-card">
          <h4><i class="fas fa-user-friends"></i> Members</h4>
          <div id="members-list" class="members-list">
            <!-- Members will be loaded here -->
          </div>
          <button class="btn-secondary" onclick="openInviteModal()">
            <i class="fas fa-user-plus"></i> Invite Member
          </button>
        </div>
      </div>

      <!-- Approvals Settings -->
      <div id="approvals-settings" class="settings-content">
        <div class="settings-card">
          <h4><i class="fas fa-check-circle"></i> Expense Approvals</h4>
          <div class="approval-config">
            <div class="form-control">
              <label for="approval-required">Require Approval for Expenses Over:</label>
              <input type="number" id="approval-required" placeholder="10000" min="0" step="100">
              <small>Set to 0 to disable approval workflow</small>
            </div>
            <button class="btn-submit" onclick="saveApprovalSettings()">
              <i class="fas fa-save"></i> Save Settings
            </button>
          </div>
        </div>

        <div class="settings-card">
          <h4><i class="fas fa-clock"></i> Pending Approvals</h4>
          <div id="pending-approvals" class="approvals-list">
            <!-- Pending approvals will be loaded here -->
          </div>
        </div>

        <div class="settings-card">
          <h4><i class="fas fa-history"></i> Approval History</h4>
          <div id="approval-history" class="approvals-list">
            <!-- Approval history will be loaded here -->
          </div>
        </div>
      </div>

      <!-- Profile Settings -->
      <div id="profile-settings" class="settings-content">
        <div class="settings-card">
          <h4><i class="fas fa-user"></i> Profile Information</h4>
          <div class="profile-form">
            <div class="form-control">
              <label for="profile-name">Full Name:</label>
              <input type="text" id="profile-name" placeholder="Your full name">
            </div>
            <div class="form-control">
              <label for="profile-email">Email:</label>
              <input type="email" id="profile-email" placeholder="your.email@example.com" readonly>
            </div>
            <button class="btn-submit" onclick="updateProfile()">
              <i class="fas fa-save"></i> Update Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
  </main>

  <!-- Investment Portfolio Section -->
  <section id="investments" class="investments-section container" style="display: none; padding-top: 100px;">
    <div class="section-header">
      <h3><i class="fas fa-chart-line"></i> Investment Portfolio</h3>
      <button class="add-goal-btn" onclick="openInvestmentModal()">
        <i class="fas fa-plus"></i> Add Holding
      </button>
    </div>

    <!-- Portfolio Summary -->
    <div class="quick-stats">
      <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <i class="fas fa-coins"></i>
        </div>
        <div class="stat-content">
          <p class="stat-label">Total Portfolio Value</p>
          <h3 class="stat-value" id="portfolio-total-value">‚Çπ0.00</h3>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
          <i class="fas fa-arrow-trend-up"></i>
        </div>
        <div class="stat-content">
          <p class="stat-label">Total Profit/Loss</p>
          <h3 class="stat-value" id="portfolio-total-pl">‚Çπ0.00</h3>
          <small id="portfolio-pl-percent" class="trend-text">0.00%</small>
        </div>
      </div>
    </div>

    <!-- Holdings List -->
    <div class="investments-list-container">
      <div class="list-header">
        <h4>Your Holdings</h4>
        <button class="refresh-btn-sm" title="Refresh Prices" onclick="loadInvestments()">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>
      <div id="investments-list" class="investments-grid">
        <!-- Investments will be rendered here -->
        <div class="widget-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <span>Loading portfolio...</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Add Investment Modal -->
  <div id="investment-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-chart-pie"></i> Add Investment</h3>
        <span class="close-modal" onclick="closeInvestmentModal()">&times;</span>
      </div>
      <form id="investment-form">
        <div class="modal-body">
          <div class="form-control">
            <label for="inv-type">Asset Type</label>
            <select id="inv-type" required onchange="updateSymbolPlaceholder()">
              <option value="crypto">Cryptocurrency</option>
              <option value="stock">Stock</option>
              <option value="fund">Mutual Fund</option>
              <option value="gold">Gold/Silver</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-row">
            <div class="form-control">
              <label for="inv-symbol">Symbol/Ticker</label>
              <input type="text" id="inv-symbol" placeholder="e.g., BTC, AAPL" required uppercase>
              <small id="symbol-hint">For crypto, use ticker (BTC, ETH)</small>
            </div>
            <div class="form-control">
              <label for="inv-name">Asset Name</label>
              <input type="text" id="inv-name" placeholder="e.g., Bitcoin, Apple Inc." required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-control">
              <label for="inv-quantity">Quantity</label>
              <input type="number" id="inv-quantity" placeholder="0.00" step="any" required>
            </div>
            <div class="form-control">
              <label for="inv-buy-price">Buy Price (Per Unit)</label>
              <input type="number" id="inv-buy-price" placeholder="‚Çπ0.00" step="any" required>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-cancel" onclick="closeInvestmentModal()">Cancel</button>
          <button type="submit" class="btn-submit">Add to Portfolio</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Currency Settings Modal -->
  <div id="currency-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-money-bill-wave"></i> <span data-i18n="currency.modal.title">Currency Settings</span>
        </h3>
        <span class="close-modal" onclick="closeCurrencyModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="form-control">
          <label for="preferred-currency" data-i18n="currency.preferred">Preferred Currency</label>
          <select id="preferred-currency" class="currency-select">
            <option value="">Loading currencies...</option>
          </select>
          <small data-i18n="currency.info">All expenses will be converted to this currency for display</small>
        </div>
        <div class="form-control">
          <label data-i18n="currency.exchange">Exchange Rate Info</label>
          <div class="exchange-rate-info" id="exchange-rate-info">
            <p>Select a currency to see current exchange rates</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeCurrencyModal()" data-i18n="currency.cancel">Cancel</button>
        <button class="btn-submit" onclick="saveCurrencyPreference()" data-i18n="currency.save">Save Settings</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">

      <div class="footer-section">
        <div class="footer-logo">
          <i class="fas fa-wallet"></i>
          <span>ExpenseFlow</span>
        </div>

        <p class="footer-description">
          Smart money management made simple. Track, analyze, and optimize your financial habits.
        </p>

        <div class="social-links">
          <a href="https://x.com/9504_renu" class="social-link" target="_blank" rel="noopener noreferrer"
            aria-label="X (Twitter)">
            <i class="fab fa-x-twitter"></i>
          </a>

          <a href="https://github.com/Renu-code123/ExpenseFlow" class="social-link" target="_blank"
            rel="noopener noreferrer" aria-label="Github">
            <i class="fab fa-github"></i>
          </a>

          <a href="mailto:renu89857@gmail.com" class="social-link" target="_blank" rel="noopener noreferrer"
            aria-label="Email">
            <i class="far fa-envelope"></i>
          </a>

          <a href="https://www.linkedin.com/in/renu-kumari-prajapati" class="social-link" target="_blank"
            rel="noopener noreferrer" aria-label="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
      </div>


      <div class="footer-section">
        <h4>Company</h4>
        <ul class="footer-links">
          <li><a href="AboutUs.html">About Us</a></li>
          <li><a href="PrivacyPolicy.html">Privacy Policy</a></li>
          <li><a href="terms_service.html">Terms of Service</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h4>Features</h4>
        <ul class="footer-links">
          <li><a href="#">Expense Tracking</a></li>
          <li><a href="#">Budget Planning</a></li>
          <li><a href="#">Analytics Dashboard</a></li>
          <li><a href="#">Goal Setting</a></li>
        </ul>
      </div>

    </div>

    <div class="footer-bottom">
      <div class="footer-container">
        <p>&copy; 2026 ExpenseFlow. All rights reserved. Made with ‚ù§Ô∏è for better financial management.</p>
        <div class="footer-stats">
          <span>üèÜ Trusted by 10,000+ users</span>
          <span>üí∞ ‚Çπ50M+ tracked</span>
          <span>üìä 99.9% uptime</span>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="trackerscript.js"></script>
  <script src="api-integration.js"></script>
  <script src="realtime-sync.js"></script>
  <script src="analytics-dashboard.js"></script>
  <script>
    // Recurring Modal Control
    function openRecurringModal() {
      const modal = document.getElementById('recurring-modal');
      if (modal) {
        modal.style.display = 'flex';
        modal.classList.add('active');
        document.getElementById('recurring-modal-title').textContent = 'Add Recurring Expense';
        document.getElementById('recurring-form').reset();
      }
    }

    function closeRecurringModal() {
      const modal = document.getElementById('recurring-modal');
      if (modal) {
        modal.style.display = 'none';
        modal.classList.remove('active');
      }
    }

    // Initialize recurring button
    document.addEventListener('DOMContentLoaded', function () {
      const addBtn = document.getElementById('add-recurring-btn');
      if (addBtn) {
        addBtn.addEventListener('click', openRecurringModal);
      }

      const closeBtn = document.getElementById('recurring-modal-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', closeRecurringModal);
      }

      const cancelBtn = document.getElementById('recurring-cancel-btn');
      if (cancelBtn) {
        cancelBtn.addEventListener('click', closeRecurringModal);
      }

      // Close modal when clicking outside
      const modal = document.getElementById('recurring-modal');
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeRecurringModal();
          }
        });
      }

      // Auto-Categorize Button Handler
      const autoCategorizeBtn = document.getElementById('auto-categorize-btn');
      if (autoCategorizeBtn) {
        autoCategorizeBtn.addEventListener('click', handleAutoCategorize);
      }
    });

    // Auto-Categorize Handler Function
    async function handleAutoCategorize() {
      const btn = document.getElementById('auto-categorize-btn');
      if (!btn || btn.classList.contains('loading')) return;

      const icon = btn.querySelector('i');
      const originalIcon = icon.className;

      // Set loading state
      btn.classList.add('loading');
      icon.className = 'fas fa-spinner';

      try {
        const result = await window.autoCategorizeAllUncategorized();

        if (result.success) {
          showAutoCategorizeResults(result.data);

          // Refresh the transaction list
          if (typeof window.updateAllData === 'function') {
            await window.updateAllData();
          }
        }
      } catch (error) {
        console.error('Auto-categorize error:', error);
        if (typeof showNotification === 'function') {
          showNotification('Failed to auto-categorize expenses', 'error');
        }
      } finally {
        // Reset button state
        btn.classList.remove('loading');
        icon.className = originalIcon;
      }
    }

    // Show Auto-Categorize Results Modal
    function showAutoCategorizeResults(data) {
      // Remove existing modal if any
      const existingModal = document.querySelector('.categorize-results-modal');
      if (existingModal) existingModal.remove();

      const modal = document.createElement('div');
      modal.className = 'categorize-results-modal';
      modal.innerHTML = `
        <div class="categorize-results-content">
          <div class="categorize-results-header">
            <h3><i class="fas fa-magic"></i> Auto-Categorization Results</h3>
            <button class="categorize-results-close">&times;</button>
          </div>
          <div class="categorize-results-stats">
            <div class="stat-card auto">
              <div class="stat-value">${data.categorized}</div>
              <div class="stat-label">Auto-Applied</div>
            </div>
            <div class="stat-card suggested">
              <div class="stat-value">${data.suggested}</div>
              <div class="stat-label">Suggested</div>
            </div>
            <div class="stat-card unchanged">
              <div class="stat-value">${data.unchanged}</div>
              <div class="stat-label">No Match</div>
            </div>
          </div>
          <p style="text-align: center; color: var(--text-secondary, #888); font-size: 0.9rem;">
            ${data.categorized > 0
          ? `<i class="fas fa-check-circle" style="color: #4caf50;"></i> ${data.categorized} expenses were automatically categorized with high confidence.`
          : 'No expenses were auto-categorized.'}
            ${data.suggested > 0
          ? `<br><i class="fas fa-lightbulb" style="color: #ffc107;"></i> ${data.suggested} expenses have suggestions available.`
          : ''}
          </p>
        </div>
      `;

      document.body.appendChild(modal);

      // Show modal with animation
      requestAnimationFrame(() => {
        modal.classList.add('active');
      });

      // Close handlers
      const closeBtn = modal.querySelector('.categorize-results-close');
      closeBtn.addEventListener('click', () => {
        modal.classList.remove('active');
        setTimeout(() => modal.remove(), 300);
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('active');
          setTimeout(() => modal.remove(), 300);
        }
      });

      // Show notification
      if (typeof showNotification === 'function') {
        const message = data.categorized > 0
          ? `Auto-categorized ${data.categorized} expenses!`
          : `Processed ${data.total} expenses`;
        showNotification(message, data.categorized > 0 ? 'success' : 'info');
      }
    }
  </script>
  <script>
    // Currency Management Functions
    let supportedCurrencies = [];
    let currentUserCurrency = 'INR';

    // Load supported currencies on page load
    async function loadSupportedCurrencies() {
      try {
        const token = localStorage.getItem('token');
        if (!token) return;

        const response = await fetch('/api/currency/supported', {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        const data = await response.json();
        if (data.success) {
          supportedCurrencies = data.data.currencies;
          populateCurrencySelects();
        }
      } catch (error) {
        console.error('Error loading currencies:', error);
      }
    }

    // Populate currency dropdowns
    function populateCurrencySelects() {
      const currencySelect = document.getElementById('currency');
      const preferredCurrencySelect = document.getElementById('preferred-currency');

  <style>
    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    .progress-fill.high {
      background: #4caf50 !important;
    }

    .progress-fill.medium {
      background: #ffc107 !important;
    }

    .progress-fill.low {
      background: #f44336 !important;
    }

    /* Settlement Center Styles */
    .settlement-center-card {
      max-width: 100%;
    }
    .settlement-description {
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
    }
    .loading-settlements {
      text-align: center;
      padding: 2rem;
      color: var(--text-secondary);
    }
    .loading-settlements i {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      display: block;
    }
    .settlement-balance-card {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      background: rgba(100, 255, 218, 0.1);
    }
    .settlement-balance-card.owed {
      background: rgba(76, 175, 80, 0.15);
      border-left: 4px solid #4caf50;
    }
    .settlement-balance-card.owes {
      background: rgba(244, 67, 54, 0.15);
      border-left: 4px solid #f44336;
    }
    .settlement-balance-card.settled {
      background: rgba(100, 255, 218, 0.15);
      border-left: 4px solid var(--accent-primary, #64ffda);
    }
    .balance-icon {
      font-size: 2rem;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
    }
    .settlement-balance-card.owed .balance-icon { color: #4caf50; }
    .settlement-balance-card.owes .balance-icon { color: #f44336; }
    .settlement-balance-card.settled .balance-icon { color: var(--accent-primary, #64ffda); }
    .balance-info h4 {
      margin: 0 0 0.25rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    .balance-amount {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }
    .balance-status {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    .simplification-summary {
      background: rgba(100, 255, 218, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    .simplification-summary h4 {
      margin: 0 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .simplification-stats {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .simplification-stats .stat {
      text-align: center;
      padding: 0.75rem 1rem;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
    }
    .simplification-stats .stat.highlight {
      background: rgba(100, 255, 218, 0.2);
    }
    .simplification-stats .stat.saved {
      background: rgba(76, 175, 80, 0.2);
    }
    .stat-value {
      display: block;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-primary, #64ffda);
    }
    .stat-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    .stat-arrow {
      color: var(--text-secondary);
    }
    .btn-simplify {
      background: var(--accent-primary, #64ffda);
      color: var(--bg-primary, #0a192f);
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
    }
    .btn-simplify:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(100, 255, 218, 0.3);
    }
    .member-balances, .settlements-list, .pending-settlements {
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    .member-balances h4, .settlements-list h4, .pending-settlements h4 {
      margin: 0 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .balances-list, .settlement-item, .pending-item {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .balance-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: rgba(255,255,255,0.03);
      border-radius: 8px;
    }
    .member-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--accent-primary, #64ffda);
      color: var(--bg-primary, #0a192f);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }
    .member-name {
      flex: 1;
    }
    .member-balance {
      font-weight: 600;
    }
    .member-balance.positive { color: #4caf50; }
    .member-balance.negative { color: #f44336; }
    .settlement-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      background: rgba(255,255,255,0.03);
      border-radius: 8px;
      gap: 1rem;
    }
    .settlement-parties {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex: 1;
    }
    .settlement-parties .from { color: #f44336; }
    .settlement-parties .to { color: #4caf50; }
    .settlement-amount {
      font-weight: 700;
      font-size: 1.1rem;
    }
    .btn-pay, .btn-confirm {
      background: #4caf50;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    .btn-reject {
      background: #f44336;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    .awaiting-badge, .status-badge {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.8rem;
    }
    .status-badge.verified {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
    }
    .status-badge.disputed {
      background: rgba(244, 67, 54, 0.2);
      color: #f44336;
    }
    .pending-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: rgba(255,255,255,0.03);
      border-radius: 8px;
    }
    .pending-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .pending-info .amount {
      margin-left: 0.5rem;
      font-weight: 700;
    }
    .pending-actions {
      display: flex;
      gap: 0.5rem;
    }
    .no-settlements {
      text-align: center;
      padding: 2rem;
      color: var(--text-secondary);
    }
  </style>

  <!-- Workspace Modal -->
  <div id="workspace-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-users"></i> Create Shared Workspace</h3>
        <span class="close-modal" onclick="closeWorkspaceModal()">&times;</span>
      </div>
      <form id="create-workspace-form">
        <div class="modal-body">
          <div class="form-control">
            <label for="workspace-name-input">Workspace Name *</label>
            <input type="text" id="workspace-name-input" placeholder="e.g., Family, Hackathon Team" required>
          </div>
          <div class="form-control">
            <label for="workspace-desc-input">Description (Optional)</label>
            <textarea id="workspace-desc-input" rows="3" placeholder="What is this workspace for?"></textarea>
          </div>
          <p class="info-text">
            <i class="fas fa-info-circle"></i> After creating, you can invite members from the workspace settings.
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-cancel" onclick="closeWorkspaceModal()">Cancel</button>
          <button type="submit" class="btn-submit">Create Workspace</button>
        </div>
      </form>
    </div>
  </div>

  <!--Invite Member Modal-- >
  <div id="invite-modal" class="modal invite-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-user-plus"></i> Invite Member</h3>
        <span class="close-modal" onclick="closeInviteModal()">&times;</span>
      </div>
      <form id="invite-form" class="invite-form">
        <div class="modal-body">
          <div class="form-control">
            <label for="invite-email">Email Address *</label>
            <input type="email" id="invite-email" placeholder="member@example.com" required>
            <small>Enter the email address of the person you want to invite</small>
          </div>
          <div class="form-control">
            <label for="invite-role">Role *</label>
            <select id="invite-role" class="role-select" required>
              <option value="">Select Role</option>
              <option value="viewer">Viewer - Can view expenses and reports</option>
              <option value="member">Member - Can add expenses and view all data</option>
              <option value="manager">Manager - Can manage budgets and approve expenses</option>
              <option value="admin">Admin - Can manage members and all workspace data</option>
            </select>
            <small>Choose the appropriate role for this member</small>
          </div>
          <div class="role-permissions">
            <h5>Role Permissions:</h5>
            <div id="role-permissions-display">
              <p>Select a role to see permissions</p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-cancel" onclick="closeInviteModal()">Cancel</button>
          <button type="submit" class="btn-submit">Send Invitation</button>
        </div>
      </form>
    </div>
    </section>

    <!--PWA Installation Prompt-- >
    <div id="install-prompt" class="install-prompt" style="display: none;">
      <div class="install-prompt-content">
        <div class="install-prompt-header">
          <i class="fas fa-download"></i>
          <h3 data-i18n="install.title">Install ExpenseFlow</h3>
        </div>
        <p data-i18n="install.text">Install ExpenseFlow for quick access and offline functionality!</p>
        <div class="install-prompt-actions">
          <button id="install-button" class="install-btn">
            <i class="fas fa-plus"></i> <span data-i18n="install.install">Install</span>
          </button>
          <button id="install-dismiss" class="dismiss-btn">
            <i class="fas fa-times"></i> <span data-i18n="install.dismiss">Not now</span>
          </button>
        </div>
      </div>
    </div>

    <!--ADD TRANSACTION-- >
        <section class="form-section">
          <h3>Add Transaction</h3>

          <form id="form" class="transaction-form">
            <input id="text" type="text" placeholder="Description" required />
            <input id="amount" type="number" placeholder="Amount" required />
            <select id="type" required>
              <option value="">Select Type</option>
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
            <button type="submit">Add</button>
          </form>
        </section>

    </main >

    < !--FOOTER -->
    <footer class="footer">
      <div class="footer-container">

        <!-- Brand -->
        <div class="footer-section">
          <div class="footer-logo">
            <i class="fas fa-wallet"></i>
            <span>ExpenseFlow</span>
          </div>
          <p>
            Smart money management made simple.
            Track, analyze, and optimize your finances with confidence.
          </p>

          <div class="social-links">
            <a href="#" class="social-link" aria-label="Github">
              <i class="fab fa-github"></i>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <i class="fab fa-x-twitter"></i>
            </a>
          </div>
        </div>

        <!-- Product -->
        <div class="footer-section">
          <h4>Product</h4>
          <ul class="footer-links">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Analytics</a></li>
            <li><a href="#">Budget Goals</a></li>
            <li><a href="#">Reports</a></li>
          </ul>
        </div>

        <!-- Company -->
        <div class="footer-section">
          <h4>Company</h4>
          <ul class="footer-links">
            <li><a href="#">About Us</a></li>
            <li><a href="#">Contributors</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
          </ul>
        </div>

        <!-- Support -->
        <div class="footer-section">
          <h4>Support</h4>
          <ul class="footer-links">
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Report Bug</a></li>
          </ul>
        </div>

      </div>

      <!-- Bottom bar -->
      <div class="footer-bottom">
        <p>¬© 2026 ExpenseFlow. All rights reserved.</p>
      </div>
      <div class="footer-container">

        <!-- Brand -->
        <div class="footer-section">
          <div class="footer-logo">
            <i class="fas fa-wallet"></i>
            <span>ExpenseFlow</span>
          </div>
          <p>
            Smart money management made simple.
            Track, analyze, and optimize your finances with confidence.
          </p>

          <div class="social-links">
            <a href="#" class="social-link" aria-label="Github">
              <i class="fab fa-github"></i>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <i class="fab fa-x-twitter"></i>
            </a>
          </div>
        </div>

        <!-- Product -->
        <div class="footer-section">
          <h4>Product</h4>
          <ul class="footer-links">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Analytics</a></li>
            <li><a href="#">Budget Goals</a></li>
            <li><a href="#">Reports</a></li>
          </ul>
        </div>

        <!-- Company -->
        <div class="footer-section">
          <h4>Company</h4>
          <ul class="footer-links">
            <li><a href="#">About Us</a></li>
            <li><a href="#">Contributors</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
          </ul>
        </div>

        <!-- Support -->
        <div class="footer-section">
          <h4>Support</h4>
          <ul class="footer-links">
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Report Bug</a></li>
          </ul>
        </div>

      </div>

      <!-- Bottom bar -->
      <div class="footer-bottom">
        <p>¬© 2026 ExpenseFlow. All rights reserved.</p>
      </div>
    </footer>

    <!--Cursor Trail Script-- >

    < !--PWA Installation Prompt-- >
    <div id="install-prompt" class="install-prompt" style="display: none;">
      <div class="install-prompt-content">
        <div class="install-prompt-header">
          <i class="fas fa-download"></i>
          <h3>Install ExpenseFlow</h3>
        </div>
        <p>Install ExpenseFlow for quick access and offline functionality!</p>
        <div class="install-prompt-actions">
          <button id="install-button" class="install-btn">
            <i class="fas fa-plus"></i> Install
          </button>
          <button id="install-dismiss" class="dismiss-btn">
            <i class="fas fa-times"></i> Not now
          </button>
        </div>
      </div>
    </div>
    <!--Offline Indicator-- >
    <div id="offline-indicator" class="offline-indicator" style="display: none;">
      <i class="fas fa-wifi-slash"></i>
      <span data-i18n="offline.text">You're offline. Changes will be saved locally.</span>
    </div>

    <!--Update Available Notification-- >
    <div id="update-notification" class="update-notification" style="display: none;">
      <div class="update-content">
        <i class="fas fa-sync-alt"></i>
        <span data-i18n="update.text">A new version is available!</span>
        <button id="update-button" class="update-btn" data-i18n="update.action">Update Now</button>
      </div>
    </div>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="api-integration.js"></script>
  <script src="db-manager.js"></script>
  <script src="realtime-sync.js"></script>
  <script src="analytics-dashboard.js"></script>
  <script src="protect.js"></script>
  <script src="trackerscript.js"></script>
  <script src="auth.js"></script>
  <script src="settings.js"></script>
  <script src="workspace-feature.js"></script>
  <script src="smart-triggers.js"></script>
  <script src="index.js"> </script>

  </body >

</html >
