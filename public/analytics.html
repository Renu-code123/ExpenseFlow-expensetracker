<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics & Reports - ExpenseFlow</title>
    <link rel="stylesheet" href="analytics.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="nav-content">
            <a href="../index.html" class="nav-back">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
            <div class="nav-title">
                <i class="fas fa-chart-line"></i> Analytics & Reports
            </div>
            <div class="nav-actions">
                <a href="goals.html" class="nav-link">Goals</a>
                <a href="transactions.html" class="nav-link">Transactions</a>
                <a href="budget.html" class="nav-link">Budget</a>
                <a href="settings.html" class="nav-link">Settings</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üìä Analytics & Reports</h1>
                <div class="header-actions">
                    <select id="timeRange" class="time-selector">
                        <option value="7">Last 7 Days</option>
                        <option value="30" selected>Last 30 Days</option>
                        <option value="90">Last 3 Months</option>
                        <option value="365">Last Year</option>
                    </select>
                    <button class="export-btn" onclick="exportReport()">üì§ Export Report</button>
                </div>
            </div>
        </header>

        <!-- Summary Cards -->
        <section class="summary-section">
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-icon">üí∞</div>
                    <div class="card-content">
                        <h3>Total Income</h3>
                        <p class="amount income">‚Çπ45,250</p>
                        <span class="change positive">+12.5%</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">üí∏</div>
                    <div class="card-content">
                        <h3>Total Expenses</h3>
                        <p class="amount expense">‚Çπ32,180</p>
                        <span class="change negative">+8.3%</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">üíµ</div>
                    <div class="card-content">
                        <h3>Net Savings</h3>
                        <p class="amount savings">‚Çπ13,070</p>
                        <span class="change positive">+28.9%</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">üìà</div>
                    <div class="card-content">
                        <h3>Avg Daily Spend</h3>
                        <p class="amount">‚Çπ1,073</p>
                        <span class="change negative">-5.2%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="charts-grid">
                <!-- Spending Trend Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>üìà Spending Trend</h3>
                        <div class="chart-controls">
                            <button class="chart-btn active" data-period="daily">Daily</button>
                            <button class="chart-btn" data-period="weekly">Weekly</button>
                            <button class="chart-btn" data-period="monthly">Monthly</button>
                        </div>
                    </div>
                    <canvas id="spendingTrendChart"></canvas>
                </div>

                <!-- Category Breakdown -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>üéØ Category Breakdown</h3>
                        <button class="toggle-btn" onclick="toggleChartType('categoryChart')">üìä</button>
                    </div>
                    <canvas id="categoryChart"></canvas>
                </div>

                <!-- Income vs Expenses -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>‚öñÔ∏è Income vs Expenses</h3>
                        <span class="chart-subtitle">Monthly Comparison</span>
                    </div>
                    <canvas id="incomeExpenseChart"></canvas>
                </div>

                <!-- Top Merchants -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>üè™ Top Merchants</h3>
                        <span class="chart-subtitle">Most Frequent</span>
                    </div>
                    <div class="merchants-list">
                        <div class="merchant-item">
                            <span class="merchant-name">Amazon</span>
                            <span class="merchant-amount">‚Çπ8,450</span>
                            <div class="merchant-bar" style="width: 85%"></div>
                        </div>
                        <div class="merchant-item">
                            <span class="merchant-name">Swiggy</span>
                            <span class="merchant-amount">‚Çπ5,230</span>
                            <div class="merchant-bar" style="width: 52%"></div>
                        </div>
                        <div class="merchant-item">
                            <span class="merchant-name">Uber</span>
                            <span class="merchant-amount">‚Çπ3,180</span>
                            <div class="merchant-bar" style="width: 32%"></div>
                        </div>
                        <div class="merchant-item">
                            <span class="merchant-name">Zomato</span>
                            <span class="merchant-amount">‚Çπ2,890</span>
                            <div class="merchant-bar" style="width: 29%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detailed Reports -->
        <section class="reports-section">
            <div class="reports-header">
                <h2>üìã Detailed Reports</h2>
                <div class="report-filters">
                    <select id="reportType">
                        <option value="category">Category Report</option>
                        <option value="monthly">Monthly Report</option>
                        <option value="yearly">Yearly Report</option>
                        <option value="custom">Custom Report</option>
                    </select>
                    <button class="generate-btn" onclick="generateReport()">Generate Report</button>
                </div>
            </div>

            <!-- Category Analysis Table -->
            <div class="report-table-container">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Amount</th>
                            <th>Transactions</th>
                            <th>% of Total</th>
                            <th>Avg per Transaction</th>
                            <th>Trend</th>
                        </tr>
                    </thead>
                    <tbody id="reportTableBody">
                        <tr>
                            <td><span class="category-icon">üçî</span> Food & Dining</td>
                            <td class="amount">‚Çπ12,450</td>
                            <td>45</td>
                            <td>38.7%</td>
                            <td>‚Çπ277</td>
                            <td><span class="trend up">‚ÜóÔ∏è +15%</span></td>
                        </tr>
                        <tr>
                            <td><span class="category-icon">üõí</span> Shopping</td>
                            <td class="amount">‚Çπ8,230</td>
                            <td>23</td>
                            <td>25.6%</td>
                            <td>‚Çπ358</td>
                            <td><span class="trend down">‚ÜòÔ∏è -8%</span></td>
                        </tr>
                        <tr>
                            <td><span class="category-icon">üöó</span> Transportation</td>
                            <td class="amount">‚Çπ5,180</td>
                            <td>32</td>
                            <td>16.1%</td>
                            <td>‚Çπ162</td>
                            <td><span class="trend up">‚ÜóÔ∏è +22%</span></td>
                        </tr>
                        <tr>
                            <td><span class="category-icon">üé¨</span> Entertainment</td>
                            <td class="amount">‚Çπ3,890</td>
                            <td>18</td>
                            <td>12.1%</td>
                            <td>‚Çπ216</td>
                            <td><span class="trend neutral">‚û°Ô∏è 0%</span></td>
                        </tr>
                        <tr>
                            <td><span class="category-icon">üíä</span> Healthcare</td>
                            <td class="amount">‚Çπ2,430</td>
                            <td>8</td>
                            <td>7.5%</td>
                            <td>‚Çπ304</td>
                            <td><span class="trend down">‚ÜòÔ∏è -12%</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Insights Section -->
        <section class="insights-section">
            <h2>üí° Financial Insights</h2>
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-icon">üéØ</div>
                    <div class="insight-content">
                        <h4>Spending Pattern</h4>
                        <p>You spend 40% more on weekends. Consider setting weekend budgets.</p>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">üìä</div>
                    <div class="insight-content">
                        <h4>Budget Performance</h4>
                        <p>You're 15% under budget this month. Great job on controlling expenses!</p>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">üí∞</div>
                    <div class="insight-content">
                        <h4>Savings Opportunity</h4>
                        <p>Reduce food delivery by 20% to save ‚Çπ2,500 monthly.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="analytics.js"></script>
</body>
</html>